# 项目改造方案（AI + 生命科学）

> **项目代号**：MedInk（医墨）  
> **改造基底**：RedInk（红墨）小红书AI图文生成器  
> **改造方向**：医学科普/健康教育长图生成器  
> **文档版本**：v1.0  
> **编制日期**：2025-12-03

---

## 1. 项目与业务概述

### 1.1 原项目信息
| 项目 | 信息 |
|------|------|
| 原项目名称 | RedInk（红墨） |
| GitHub 链接 | https://github.com/HisMax/RedInk |
| 原核心功能 | 输入一句话 → AI 生成小红书风格多页图文（封面 + 内容页 + 总结） |
| 技术栈 | Python 3.11+ (Flask) + Vue 3 + TypeScript + Vite |
| AI 依赖 | 文本：Gemini/OpenAI 兼容；图片：多种图片生成 API |

### 1.2 改造方向
> **一句话定位**：输入一个医学主题或健康话题，AI 自动生成 6-12 页风格统一的医学科普长图，适用于医学学习笔记、医院科普、患者教育、健康自媒体。

### 1.3 产品命名建议
- **中文名**：医墨 / 科普墨 / 健康图说
- **英文名**：MedInk / HealthCanvas / MedPoster

---

## 2. 目标用户与应用场景

### 2.1 目标用户画像

| 优先级 | 用户角色 | 典型画像 | 核心诉求 |
|--------|---------|---------|---------|
| P0 | **医学生** | 临床/基础医学本硕博，备考执医/考研 | 快速制作知识点复习卡、学习笔记图 |
| P0 | **医院宣传科/公众号运营** | 医院新媒体编辑、健康号小编 | 批量产出科普长图，提升内容效率 |
| P1 | **临床医生/护士** | 门诊/病房医护人员 | 制作患者教育材料、术前术后指导图 |
| P1 | **健康管理师/营养师** | 健康管理机构从业者 | 制作饮食/运动/慢病管理指导图卡 |
| P2 | **医学教育机构** | 医学培训机构、继续教育平台 | 制作教学课件配图、知识可视化 |
| P2 | **药企/器械市场部** | 市场专员、医学联络官 | 制作产品科普、学术会议海报 |

### 2.2 典型使用场景（User Story）

#### 场景 1：医学生制作复习笔记
> 作为一名正在备考执业医师的医学生，我希望输入「糖尿病的分型与诊断标准」，AI 能自动生成一套 8 页的知识点长图（封面 + 分型介绍 + 诊断标准 + 鉴别诊断 + 治疗原则 + 总结），这样我可以直接保存到手机相册，随时复习，不用再花 2 小时手动整理笔记。

#### 场景 2：医院公众号日常科普
> 作为医院新媒体编辑，我每周需要发布 3-5 篇健康科普文章。我希望输入「高血压患者的饮食指南」，AI 能生成一套风格统一的科普长图，我只需简单审核修改就能发布，将单篇制作时间从 3 小时缩短到 10 分钟。

#### 场景 3：医生制作患者教育材料
> 作为消化内科医生，我希望输入「胃镜检查前后注意事项」，AI 能生成一套通俗易懂的患者指导图卡，我可以打印出来放在诊室，或发到患者群里，减少反复口头解释的时间。

#### 场景 4：健康管理师制作指导方案
> 作为健康管理师，我服务的客户需要个性化的健康指导。我希望输入「2型糖尿病患者的运动处方」，AI 能生成一套图文并茂的运动指导卡片，我可以发给客户作为日常参考。

---

## 3. 产品定位与价值主张

### 3.1 解决的核心痛点
> **让医学从业者和健康科普创作者，用「一句话」在 1 分钟内生成一整套风格统一、排版精美、内容专业的医学科普/健康教育长图。**

### 3.2 关键价值点

| # | 价值点 | 说明 |
|---|--------|------|
| 1 | **效率提升 100x** | 从 2-4 小时手动制作 → 1-2 分钟 AI 生成 |
| 2 | **零设计门槛** | 不需要 PS/Canva 技能，输入文字即可出图 |
| 3 | **风格统一** | 全套长图自动保持一致的配色、排版、视觉风格 |
| 4 | **医学专业性** | Prompt 针对医学场景优化，内容结构符合医学逻辑 |
| 5 | **灵活可编辑** | 支持调整大纲、单页重绘、批量补全 |

### 3.3 与现有工具的差异

| 对比维度 | 现有工具 | MedInk（改造后） |
|---------|---------|-----------------|
| Canva/稿定设计 | 需手动选模板、填内容、调排版 | 一句话自动生成全套 |
| ChatGPT + DALL·E | 单图生成，无法保持多页风格一致 | 系列图风格统一 |
| 传统外包设计 | 周期长、成本高、沟通成本大 | 即时生成、成本趋近于零 |
| 原版 RedInk | 小红书风格，非医学专业 | 医学科普风格，专业术语 + 通俗表达 |

---

## 4. 功能规划（MVP 优先级）

### 4.1 Must（必须有）— MVP 核心功能

| 功能 | 说明 | 改造工作量 |
|------|------|-----------|
| **医学科普大纲生成** | 输入医学主题 → 生成结构化大纲（封面/知识点/总结） | 替换 Prompt |
| **医学风格图片生成** | 生成清新专业的医学科普配图风格 | 替换 Prompt |
| **前端文案本地化** | 将「小红书」相关文案改为「医学科普」 | 前端文案替换 |
| **免责声明** | 生成内容添加「仅供参考，不作为诊疗依据」声明 | 前后端少量修改 |

### 4.2 Should（重要但可延后）— V1.1 功能

| 功能 | 说明 |
|------|------|
| **预设医学主题模板** | 提供「疾病科普」「检查指南」「用药说明」「手术须知」等模板 |
| **医学术语简化开关** | 可选「专业版」（术语保留）或「通俗版」（术语转白话） |
| **参考文献自动标注** | 在总结页添加「内容参考：XXX 指南/教材」 |
| **多种输出格式** | 支持导出为 PDF、长图拼接、PPT |

### 4.3 Could（有则更好）— V1.2+ 功能

| 功能 | 说明 |
|------|------|
| **医学知识库 RAG** | 接入医学教材/指南知识库，提升内容准确性 |
| **多语言支持** | 支持中英双语科普图生成 |
| **品牌定制** | 支持添加医院/机构 Logo、自定义配色方案 |
| **协作审核流程** | 多人协作、审核、发布流程 |

### 4.4 Won't（当前阶段明确不做）

| 排除功能 | 理由 |
|---------|------|
| 疾病诊断/治疗建议 | 合规风险高，非科普工具定位 |
| 医学影像分析 | 需要专业医疗器械资质 |
| 电子病历生成 | 合规风险极高 |
| 处方/医嘱生成 | 需要医疗机构资质 |

---

## 5. 技术改造思路总览

### 5.1 架构复用评估

```
┌─────────────────────────────────────────────────────────────┐
│                      MedInk 架构图                          │
├─────────────────────────────────────────────────────────────┤
│  前端 (Vue 3 + TypeScript)                                  │
│  ├─ HomeView.vue ──────────── 改文案 + 增加医学主题示例      │
│  ├─ OutlineView.vue ───────── 改文案                        │
│  ├─ GenerateView.vue ──────── 改文案                        │
│  ├─ ResultView.vue ────────── 增加免责声明                   │
│  └─ SettingsView.vue ──────── 保持不变                      │
├─────────────────────────────────────────────────────────────┤
│  后端 (Flask)                                               │
│  ├─ prompts/                                                │
│  │   ├─ outline_prompt.txt ── 【核心】替换为医学科普 Prompt  │
│  │   └─ image_prompt.txt ──── 【核心】替换为医学风格 Prompt  │
│  ├─ services/                                               │
│  │   ├─ outline.py ────────── 保持不变                      │
│  │   └─ image.py ──────────── 保持不变                      │
│  └─ routes/ ───────────────── 保持不变                      │
├─────────────────────────────────────────────────────────────┤
│  配置层                                                     │
│  ├─ text_providers.yaml ───── 保持不变                      │
│  └─ image_providers.yaml ──── 保持不变                      │
└─────────────────────────────────────────────────────────────┘
```

### 5.2 模块改造清单

| 模块 | 文件 | 改造内容 | 工作量 |
|------|------|---------|--------|
| **Prompt 层** | `backend/prompts/outline_prompt.txt` | 完全替换为医学科普大纲 Prompt | ⭐⭐ |
| **Prompt 层** | `backend/prompts/image_prompt.txt` | 替换为医学科普风格图片 Prompt | ⭐⭐ |
| **前端文案** | `frontend/src/views/*.vue` | 替换「小红书」→「医学科普」相关文案 | ⭐ |
| **前端首页** | `frontend/src/views/HomeView.vue` | 替换示例主题为医学主题 | ⭐ |
| **免责声明** | `frontend/src/views/ResultView.vue` | 添加免责声明组件 | ⭐ |
| **项目信息** | `README.md` / `pyproject.toml` | 更新项目名称和描述 | ⭐ |

### 5.3 可复用模块（无需改动）

| 模块 | 说明 |
|------|------|
| 文本生成服务 | `OutlineService` 全部复用，只换 Prompt |
| 图片生成服务 | `ImageService` 全部复用，只换 Prompt |
| API 路由层 | 全部复用 |
| 配置管理 | YAML 配置 + 工厂模式全部复用 |
| 历史记录 | 全部复用 |
| 前端状态管理 | Pinia Store 全部复用 |
| Docker 部署 | 全部复用 |

### 5.4 算力与成本评估

| 项目 | 成本估算 | 说明 |
|------|---------|------|
| 文本生成（大纲） | ~$0.001-0.01/次 | Gemini Flash / GPT-4o-mini，约 2-5K tokens |
| 图片生成（单张） | ~$0.02-0.1/张 | 取决于 API 选择（DALL·E 3 约 $0.04/张，Flux 约 $0.02/张） |
| 单次完整生成 | ~$0.1-0.8/次 | 1 次大纲 + 6-12 张图片 |
| 月度成本（轻度使用） | ~$5-20/月 | 个人/小团队，每天 5-10 次 |
| 月度成本（中度使用） | ~$50-200/月 | 机构使用，每天 50-100 次 |

**成本优化建议**：
- 使用 Gemini Flash 替代 GPT-4 做大纲生成（成本降 90%）
- 使用开源图片模型 API（如 Together.ai 的 Flux）替代 DALL·E 3（成本降 50%）
- 本地部署 ComfyUI + SDXL（成本趋近于零，但需要 GPU）

### 5.5 数据与隐私合规

| 合规点 | 措施 |
|--------|------|
| **内容免责** | 所有生成内容添加「仅供参考学习，不作为诊疗依据」声明 |
| **数据不落盘** | 用户输入不存储到后端（仅本地 history 文件夹） |
| **敏感信息过滤** | Prompt 中明确禁止生成处方、诊断等敏感内容 |
| **无患者数据** | 工具定位为科普生成，不处理任何真实患者数据 |

---

## 6. 代码改造分步计划

### 步骤 1：替换大纲生成 Prompt
- **目标**：将小红书图文大纲 Prompt 替换为医学科普大纲 Prompt
- **涉及文件**：`backend/prompts/outline_prompt.txt`
- **预期改动量**：1 个文件，约 100 行
- **验证方式**：输入「糖尿病的分型」，检查生成的大纲是否符合医学科普结构

### 步骤 2：替换图片生成 Prompt
- **目标**：将小红书风格图片 Prompt 替换为医学科普风格 Prompt
- **涉及文件**：`backend/prompts/image_prompt.txt`、`backend/prompts/image_prompt_short.txt`
- **预期改动量**：2 个文件，约 150 行
- **验证方式**：生成图片，检查风格是否为清新专业的医学科普风格

### 步骤 3：前端文案本地化
- **目标**：将前端所有「小红书」相关文案替换为「医学科普」
- **涉及文件**：`frontend/src/views/HomeView.vue`、`frontend/src/views/OutlineView.vue`、`frontend/src/App.vue` 等
- **预期改动量**：5-8 个文件，每个文件改动 5-20 行
- **验证方式**：启动前端，检查所有页面文案是否正确

### 步骤 4：添加免责声明
- **目标**：在结果页和导出图片中添加免责声明
- **涉及文件**：`frontend/src/views/ResultView.vue`、可选修改后端添加水印
- **预期改动量**：1-2 个文件，约 20-50 行
- **验证方式**：生成完成后，检查是否显示免责声明

### 步骤 5：更新项目元信息
- **目标**：更新项目名称、描述、README
- **涉及文件**：`pyproject.toml`、`package.json`、`README.md`
- **预期改动量**：3 个文件，少量文案修改
- **验证方式**：检查文件内容

### 步骤 6：首页示例主题替换
- **目标**：将首页的示例主题从小红书内容替换为医学科普主题
- **涉及文件**：`frontend/src/views/HomeView.vue` 或相关组件
- **预期改动量**：1 个文件，约 20-30 行
- **验证方式**：启动前端，检查首页示例是否为医学主题

---

## 7. 验证与迭代

### 7.1 每步验证方式

| 步骤 | 验证方式 |
|------|---------|
| 步骤 1 | POST `/api/outline` with `{"topic": "糖尿病的分型与诊断"}`，检查返回大纲结构 |
| 步骤 2 | 完整生成一套图片，肉眼检查风格是否为医学科普风格 |
| 步骤 3 | 启动前端 `pnpm dev`，逐页检查文案 |
| 步骤 4 | 生成完成后检查免责声明是否显示 |
| 步骤 5 | 检查文件内容 |
| 步骤 6 | 检查首页示例主题 |

### 7.2 MVP 成功标准

| 标准 | 验收条件 |
|------|---------|
| ✅ 功能完整 | 输入医学主题 → 生成大纲 → 生成图片 → 展示结果，全流程跑通 |
| ✅ 风格正确 | 生成的图片风格为清新专业的医学科普风格，非小红书网红风 |
| ✅ 文案一致 | 前端所有文案不出现「小红书」字样 |
| ✅ 合规声明 | 结果页显示免责声明 |
| ✅ 内容质量 | 生成的大纲结构符合医学科普逻辑（病因→症状→诊断→治疗→预防） |

### 7.3 后续迭代方向

| 版本 | 迭代内容 |
|------|---------|
| V1.1 | 增加预设医学主题模板；增加「专业版/通俗版」切换 |
| V1.2 | 支持 PDF 导出；支持长图拼接导出 |
| V1.3 | 接入医学知识库 RAG，提升内容准确性 |
| V2.0 | 支持品牌定制（Logo、配色）；支持协作审核流程 |

---

## 8. 风险与备选方案

### 8.1 可能的风险

| 风险类型 | 风险描述 | 影响程度 | 应对措施 |
|---------|---------|---------|---------|
| **内容准确性** | AI 生成的医学内容可能有错误 | 中 | 强调「仅供参考」；V1.1 接入 RAG 提升准确性 |
| **图片风格不稳定** | 图片生成 API 可能出风格不一致的图 | 低 | 单页重绘功能已支持；优化 Prompt 约束 |
| **API 成本超预期** | 高频使用导致成本过高 | 中 | 切换低成本 API（Flux）；考虑本地部署 |
| **合规风险** | 用户将内容用于非科普场景 | 低 | 免责声明 + 使用条款明确限制 |

### 8.2 降级/备选方案

| 场景 | 备选方案 |
|------|---------|
| 图片 API 不可用 | 切换到其他服务商（系统已支持多服务商） |
| 生成质量不佳 | 回退到原版 Prompt，继续优化 |
| 成本过高 | 限制每日生成次数；切换本地模型 |

---

## 9. 改造工作量总结

| 类别 | 文件数 | 预计代码行数 | 预计耗时 |
|------|--------|-------------|---------|
| Prompt 替换 | 3 | ~250 行 | 30 分钟 |
| 前端文案 | 5-8 | ~100 行 | 30 分钟 |
| 免责声明 | 1-2 | ~30 行 | 15 分钟 |
| 项目元信息 | 3 | ~50 行 | 10 分钟 |
| **合计** | **~15 个文件** | **~430 行** | **~1.5 小时** |

> **结论**：这是一个极高性价比的改造项目。用 1.5 小时的改造工作，将一个小红书图文工具变成一个医学科普长图生成器，核心架构 100% 复用。

---

## 附录：医学科普 Prompt 设计思路

### 大纲 Prompt 核心改动点
1. 角色设定：从「小红书内容创作专家」→「医学科普内容专家」
2. 内容结构：增加医学逻辑结构（定义→病因→症状→诊断→治疗→预防→总结）
3. 语言风格：从「网红风、emoji 多」→「专业但通俗、emoji 适度」
4. 合规约束：明确禁止生成诊断建议、处方、具体用药剂量

### 图片 Prompt 核心改动点
1. 风格设定：从「小红书爆款风格」→「清新专业的医学科普风格」
2. 配色方案：从「时尚明亮」→「医疗蓝/健康绿/专业白」
3. 视觉元素：从「装饰性插画」→「医学图标、解剖示意、流程图」
4. 排版要求：保持原有的清晰可读要求，增加「信息层次分明、重点突出」

---

*文档结束*
